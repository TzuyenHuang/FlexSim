setviewtext(systemwindow(1), "");
setviewtext(systemwindow(2), "");
setviewtext(systemwindow(3), "");
for(int n = content(model()); n > 1; n--){
	destroyobject(rank(model(), n));
}

Object source = Object.create("Source");
Object Source = Model.find("Source");
source.location = Vec3(0, 0, 0);

Storage.Object rack = Object.create("Rack");
Object Rack = Model.find("Rack");
rack.location = Vec3(5, 0, 0);

Object queue = Object.create("Queue");
Object Queue = Model.find("Queue");
queue.location = Vec3(15, 0, 0);

contextdragconnection(Source, Rack, "A");
contextdragconnection(Rack, Queue, "A");

TaskExecuter asrsvehicle = Object.create("ASRSvehicle");
Object ASRSvehicle = Model.find("ASRSvehicle");
asrsvehicle.location = Vec3(0, -5, 0);

contextdragconnection(Source, ASRSvehicle, "S");
contextdragconnection(Rack, ASRSvehicle, "S");

Source.setProperty("UseTransport", 1);
Rack.setProperty("UseTransport", 1);

Map dimensions = Rack.getProperty("Dimensions");
dimensions.NumBays = 2;
dimensions.NumLevels = 3;
dimensions.SlotsPerBay = 1;
Rack.setProperty("Dimensions",dimensions);

Source.setProperty("ArrivalStyle", 2);
Table sourceArrivals = source.find(">variables/schedule");
sourceArrivals[1][3] = 15;
sourceArrivals.addRow();
sourceArrivals[2][1] = 0;
sourceArrivals[2][2] = "Product";
sourceArrivals[2][3] = 5;

int type = 1;
for (int i = 1; i <= rack.bays.length; i++) {
	Storage.Bay bay = rack.bays[i];
	for (int j = 1; j <= bay.levels.length; j++) {
		Storage.Level level = bay.levels[j];
		for (int k = 1; k <= level.slots.length; k++) {
			Storage.Slot slot = level.slots[k];
			//print(slot.bayID, slot.levelID, slot.slotID);
		}
	}
}
source.setProperty("Triggers.OnCreation", "Object current = ownerobject(c);\n\
Object item = param(1);\n\
int rownumber = param(2);\n\
if(rownumber == 1) Storage.Item(item).as(Storage.Item).assignedSlot = current.outObjects[1].as(Storage.Object).getSlot(2, 2, 1);\n\
if(rownumber == 2) Storage.Item(item).as(Storage.Item).assignedSlot = current.outObjects[1].as(Storage.Object).getSlot(1, 2, 1);\n");
